"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const card_1 = require("@/components/ui/card");
const progress_1 = require("@/components/ui/progress");
const badge_1 = require("@/components/ui/badge");
const RiskMetricsPanel = ({ varMetrics, kellyMetrics, portfolio }) => {
    const formatPercent = (value) => `${(value * 100).toFixed(2)}%`;
    const formatCurrency = (value) => `$${value.toFixed(2)}`;
    const getVaRColor = (var_value) => {
        if (var_value < 0.03)
            return 'bg-green-500';
        if (var_value < 0.05)
            return 'bg-yellow-500';
        return 'bg-red-500';
    };
    const getKellyColor = (fraction) => {
        if (fraction < 0.01)
            return 'destructive';
        if (fraction < 0.05)
            return 'warning';
        if (fraction > 0.3)
            return 'warning';
        return 'success';
    };
    const getDrawdownSeverity = (drawdown) => {
        const absDrawdown = Math.abs(drawdown);
        if (absDrawdown < 0.05)
            return { color: 'text-green-600', label: 'Low Risk' };
        if (absDrawdown < 0.10)
            return { color: 'text-yellow-600', label: 'Moderate' };
        if (absDrawdown < 0.15)
            return { color: 'text-orange-600', label: 'High Risk' };
        return { color: 'text-red-600', label: 'Critical' };
    };
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "\uD83D\uDCCA Advanced Risk Analytics" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-6", children: [varMetrics && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("h3", { className: "text-sm font-semibold mb-3 flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { children: "Value at Risk (VaR)" }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "outline", children: [formatPercent(varMetrics.confidence), " Confidence"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between text-sm mb-1", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-gray-600", children: "Parametric VaR" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: formatPercent(varMetrics.parametric) })] }), (0, jsx_runtime_1.jsx)(progress_1.Progress, { value: varMetrics.parametric * 100, max: 10, className: getVaRColor(varMetrics.parametric) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between text-sm mb-1", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-gray-600", children: "Historical VaR" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: formatPercent(varMetrics.historical) })] }), (0, jsx_runtime_1.jsx)(progress_1.Progress, { value: varMetrics.historical * 100, max: 10, className: getVaRColor(varMetrics.historical) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between text-sm mb-1", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-gray-600", children: "Monte Carlo VaR" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: formatPercent(varMetrics.monteCarlo) })] }), (0, jsx_runtime_1.jsx)(progress_1.Progress, { value: varMetrics.monteCarlo * 100, max: 10, className: getVaRColor(varMetrics.monteCarlo) })] })] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-xs text-gray-500 mt-2", children: ["Last updated: ", new Date(varMetrics.timestamp).toLocaleTimeString()] })] })), kellyMetrics && ((0, jsx_runtime_1.jsxs)("div", { className: "pt-4 border-t", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-sm font-semibold mb-3", children: "\uD83D\uDCB0 Kelly Criterion" }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-gray-50 p-3 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-2", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Optimal Position Size" }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: getKellyColor(kellyMetrics.adjustedFraction), children: formatPercent(kellyMetrics.adjustedFraction) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-xs text-gray-500", children: ["Full Kelly: ", formatPercent(kellyMetrics.optimalFraction), " \u00D7 0.25 safety"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-3 text-sm", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Win Rate" }), (0, jsx_runtime_1.jsx)("p", { className: "font-semibold", children: formatPercent(kellyMetrics.winRate) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Win/Loss Ratio" }), (0, jsx_runtime_1.jsx)("p", { className: "font-semibold", children: (kellyMetrics.avgWin / kellyMetrics.avgLoss).toFixed(2) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Avg Win" }), (0, jsx_runtime_1.jsx)("p", { className: "font-semibold text-green-600", children: formatCurrency(kellyMetrics.avgWin) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Avg Loss" }), (0, jsx_runtime_1.jsx)("p", { className: "font-semibold text-red-600", children: formatCurrency(kellyMetrics.avgLoss) })] })] })] }), kellyMetrics.adjustedFraction < 0.01 && ((0, jsx_runtime_1.jsx)("div", { className: "mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800", children: "\u26A0\uFE0F Low Kelly fraction suggests reducing position sizes" })), kellyMetrics.optimalFraction < 0 && ((0, jsx_runtime_1.jsx)("div", { className: "mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-800", children: "\uD83D\uDEA8 Negative Kelly - Strategy may be losing edge!" }))] })), portfolio && ((0, jsx_runtime_1.jsxs)("div", { className: "pt-4 border-t", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-sm font-semibold mb-3", children: "\uD83D\uDEE1\uFE0F Portfolio Risk" }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-1", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Current Drawdown" }), (0, jsx_runtime_1.jsx)("span", { className: `text-sm font-semibold ${getDrawdownSeverity(portfolio.drawdown).color}`, children: formatPercent(portfolio.drawdown) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(progress_1.Progress, { value: Math.abs(portfolio.drawdown) * 100, max: 30, className: "flex-1" }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", className: "text-xs", children: getDrawdownSeverity(portfolio.drawdown).label })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-blue-50 p-3 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Sharpe Ratio" }), (0, jsx_runtime_1.jsx)("span", { className: "text-lg font-bold text-blue-600", children: portfolio.sharpeRatio.toFixed(2) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-xs text-gray-500 mt-1", children: [portfolio.sharpeRatio > 2 ? 'Excellent' :
                                                        portfolio.sharpeRatio > 1 ? 'Good' :
                                                            portfolio.sharpeRatio > 0 ? 'Acceptable' : 'Poor', " risk-adjusted returns"] })] })] })] })), (0, jsx_runtime_1.jsxs)("div", { className: "pt-4 border-t", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-sm font-semibold mb-2", children: "\uD83D\uDEA8 Risk Status" }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [varMetrics && varMetrics.parametric > 0.05 && ((0, jsx_runtime_1.jsx)("div", { className: "text-xs p-2 bg-red-50 text-red-700 rounded", children: "High VaR detected - Consider reducing exposure" })), portfolio && Math.abs(portfolio.drawdown) > 0.15 && ((0, jsx_runtime_1.jsx)("div", { className: "text-xs p-2 bg-red-50 text-red-700 rounded", children: "Critical drawdown level - Emergency stop may trigger" })), kellyMetrics && kellyMetrics.adjustedFraction < 0.01 && ((0, jsx_runtime_1.jsx)("div", { className: "text-xs p-2 bg-yellow-50 text-yellow-700 rounded", children: "Kelly suggests minimal position sizing" })), (!varMetrics || varMetrics.parametric <= 0.05) &&
                                        (!portfolio || Math.abs(portfolio.drawdown) <= 0.15) &&
                                        (!kellyMetrics || kellyMetrics.adjustedFraction >= 0.01) && ((0, jsx_runtime_1.jsx)("div", { className: "text-xs p-2 bg-green-50 text-green-700 rounded", children: "\u2705 All risk metrics within acceptable ranges" }))] })] })] })] }));
};
exports.default = RiskMetricsPanel;
