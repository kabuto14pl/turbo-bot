"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const material_1 = require("@mui/material");
const icons_material_1 = require("@mui/icons-material");
const tradingStore_1 = require("../store/tradingStore");
const Portfolio = () => {
    const { portfolio } = (0, tradingStore_1.useTradingSelectors)();
    const [loading, setLoading] = (0, react_1.useState)(false);
    // Mock portfolio data if none available
    const mockPortfolio = {
        totalValue: 45780.50,
        cash: 12450.00,
        dailyPnL: 1250.80,
        dailyPnLPercent: 2.81,
        positions: [
            { symbol: 'BTCUSDT', quantity: 0.5, averagePrice: 42000, currentPrice: 43500, pnl: 750, pnlPercent: 3.57 },
            { symbol: 'ETHUSDT', quantity: 8.2, averagePrice: 2800, currentPrice: 2850, pnl: 410, pnlPercent: 1.79 },
            { symbol: 'BNBUSDT', quantity: 15, averagePrice: 420, currentPrice: 435, pnl: 225, pnlPercent: 3.57 },
            { symbol: 'ADAUSDT', quantity: 2500, averagePrice: 0.85, currentPrice: 0.88, pnl: 75, pnlPercent: 3.53 }
        ]
    };
    const currentPortfolio = portfolio || mockPortfolio;
    const handleRefresh = () => {
        setLoading(true);
        setTimeout(() => setLoading(false), 1000);
    };
    const formatCurrency = (value) => `$${value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
    const formatPercent = (value) => `${value >= 0 ? '+' : ''}${value.toFixed(2)}%`;
    return ((0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { p: 3 }, children: [(0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { display: 'flex', justifyContent: 'between', alignItems: 'center', mb: 3 }, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h4", gutterBottom: true, children: "Portfolio Management" }), (0, jsx_runtime_1.jsx)(material_1.Tooltip, { title: "Refresh portfolio data", children: (0, jsx_runtime_1.jsx)(material_1.IconButton, { onClick: handleRefresh, disabled: loading, children: (0, jsx_runtime_1.jsx)(icons_material_1.Refresh, {}) }) })] }), loading && (0, jsx_runtime_1.jsx)(material_1.LinearProgress, { sx: { mb: 2 } }), (0, jsx_runtime_1.jsxs)(material_1.Grid, { container: true, spacing: 3, sx: { mb: 4 }, children: [(0, jsx_runtime_1.jsx)(material_1.Grid, { item: true, xs: 12, md: 3, children: (0, jsx_runtime_1.jsx)(material_1.Card, { children: (0, jsx_runtime_1.jsx)(material_1.CardContent, { children: (0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { display: 'flex', alignItems: 'center', justifyContent: 'space-between' }, children: [(0, jsx_runtime_1.jsxs)(material_1.Box, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { color: "textSecondary", gutterBottom: true, children: "Total Portfolio Value" }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h5", children: formatCurrency(currentPortfolio.totalValue) })] }), (0, jsx_runtime_1.jsx)(material_1.Avatar, { sx: { bgcolor: 'primary.main' }, children: (0, jsx_runtime_1.jsx)(icons_material_1.AccountBalance, {}) })] }) }) }) }), (0, jsx_runtime_1.jsx)(material_1.Grid, { item: true, xs: 12, md: 3, children: (0, jsx_runtime_1.jsx)(material_1.Card, { children: (0, jsx_runtime_1.jsx)(material_1.CardContent, { children: (0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { display: 'flex', alignItems: 'center', justifyContent: 'space-between' }, children: [(0, jsx_runtime_1.jsxs)(material_1.Box, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { color: "textSecondary", gutterBottom: true, children: "Daily P&L" }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h5", color: currentPortfolio.dailyPnL >= 0 ? 'success.main' : 'error.main', children: formatCurrency(currentPortfolio.dailyPnL) }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "body2", color: currentPortfolio.dailyPnL >= 0 ? 'success.main' : 'error.main', children: formatPercent(currentPortfolio.dailyPnLPercent) })] }), (0, jsx_runtime_1.jsx)(material_1.Avatar, { sx: { bgcolor: currentPortfolio.dailyPnL >= 0 ? 'success.main' : 'error.main' }, children: currentPortfolio.dailyPnL >= 0 ? (0, jsx_runtime_1.jsx)(icons_material_1.TrendingUp, {}) : (0, jsx_runtime_1.jsx)(icons_material_1.TrendingDown, {}) })] }) }) }) }), (0, jsx_runtime_1.jsx)(material_1.Grid, { item: true, xs: 12, md: 3, children: (0, jsx_runtime_1.jsx)(material_1.Card, { children: (0, jsx_runtime_1.jsxs)(material_1.CardContent, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { color: "textSecondary", gutterBottom: true, children: "Available Cash" }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h5", children: formatCurrency(currentPortfolio.cash) }), (0, jsx_runtime_1.jsxs)(material_1.Typography, { variant: "body2", color: "textSecondary", children: [((currentPortfolio.cash / currentPortfolio.totalValue) * 100).toFixed(1), "% of portfolio"] })] }) }) }), (0, jsx_runtime_1.jsx)(material_1.Grid, { item: true, xs: 12, md: 3, children: (0, jsx_runtime_1.jsx)(material_1.Card, { children: (0, jsx_runtime_1.jsxs)(material_1.CardContent, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { color: "textSecondary", gutterBottom: true, children: "Active Positions" }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h5", children: currentPortfolio.positions?.length || 0 }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "body2", color: "textSecondary", children: "Across multiple pairs" })] }) }) })] }), (0, jsx_runtime_1.jsx)(material_1.Card, { children: (0, jsx_runtime_1.jsxs)(material_1.CardContent, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", gutterBottom: true, children: "Current Positions" }), (0, jsx_runtime_1.jsx)(material_1.TableContainer, { component: material_1.Paper, children: (0, jsx_runtime_1.jsxs)(material_1.Table, { children: [(0, jsx_runtime_1.jsx)(material_1.TableHead, { children: (0, jsx_runtime_1.jsxs)(material_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(material_1.TableCell, { children: "Symbol" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "Quantity" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "Avg Price" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "Current Price" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "Market Value" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "P&L" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "P&L %" })] }) }), (0, jsx_runtime_1.jsx)(material_1.TableBody, { children: currentPortfolio.positions?.map((position, index) => {
                                            const marketValue = position.quantity * position.currentPrice;
                                            return ((0, jsx_runtime_1.jsxs)(material_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(material_1.TableCell, { component: "th", scope: "row", children: (0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { display: 'flex', alignItems: 'center' }, children: [(0, jsx_runtime_1.jsx)(material_1.Avatar, { sx: { width: 24, height: 24, mr: 1, fontSize: '0.7rem' }, children: position.symbol.slice(0, 2) }), position.symbol] }) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: position.quantity }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: formatCurrency(position.averagePrice) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: formatCurrency(position.currentPrice) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: formatCurrency(marketValue) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: (0, jsx_runtime_1.jsx)(material_1.Typography, { color: position.pnl >= 0 ? 'success.main' : 'error.main', children: formatCurrency(position.pnl) }) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: (0, jsx_runtime_1.jsx)(material_1.Chip, { label: formatPercent(position.pnlPercent), color: position.pnl >= 0 ? 'success' : 'error', size: "small", variant: "outlined" }) })] }, index));
                                        }) })] }) })] }) })] }));
};
exports.default = Portfolio;
