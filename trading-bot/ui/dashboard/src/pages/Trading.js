"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const material_1 = require("@mui/material");
const icons_material_1 = require("@mui/icons-material");
const tradingStore_1 = require("../store/tradingStore");
function TabPanel(props) {
    const { children, value, index, ...other } = props;
    return ((0, jsx_runtime_1.jsx)("div", { hidden: value !== index, ...other, children: value === index && (0, jsx_runtime_1.jsx)(material_1.Box, { sx: { p: 3 }, children: children }) }));
}
const Trading = () => {
    const { systemStatus } = (0, tradingStore_1.useTradingSelectors)();
    const [tabValue, setTabValue] = (0, react_1.useState)(0);
    const [selectedStrategy, setSelectedStrategy] = (0, react_1.useState)('EnhancedRSITurbo');
    const [tradeAmount, setTradeAmount] = (0, react_1.useState)('1000');
    const [stopLoss, setStopLoss] = (0, react_1.useState)('2.0');
    const [takeProfit, setTakeProfit] = (0, react_1.useState)('3.0');
    const [autoTrading, setAutoTrading] = (0, react_1.useState)(true);
    // Mock data for demonstration
    const mockStrategies = [
        { id: 'EnhancedRSITurbo', name: 'Enhanced RSI Turbo', status: 'active', pnl: 1250.80, trades: 24, winRate: 68.2 },
        { id: 'MACDCrossover', name: 'MACD Crossover', status: 'paused', pnl: 890.50, trades: 18, winRate: 72.1 },
        { id: 'BollingerBands', name: 'Bollinger Bands', status: 'active', pnl: 445.20, trades: 12, winRate: 58.3 }
    ];
    const mockRecentTrades = [
        { time: '10:45:23', symbol: 'BTCUSDT', side: 'BUY', amount: 0.1, price: 43500, pnl: 125.50, status: 'closed' },
        { time: '10:42:15', symbol: 'ETHUSDT', side: 'SELL', amount: 2.5, price: 2850, pnl: -45.20, status: 'closed' },
        { time: '10:38:07', symbol: 'BNBUSDT', side: 'BUY', amount: 5, price: 435, pnl: 85.75, status: 'open' },
    ];
    const handleTabChange = (_event, newValue) => {
        setTabValue(newValue);
    };
    const handleStartStrategy = () => {
        console.log('Starting strategy:', selectedStrategy);
        // Implementation here
    };
    const handleStopStrategy = () => {
        console.log('Stopping strategy:', selectedStrategy);
        // Implementation here
    };
    const formatCurrency = (value) => `$${value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
    return ((0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { p: 3 }, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h4", gutterBottom: true, children: "Trading Interface" }), (0, jsx_runtime_1.jsxs)(material_1.Alert, { severity: systemStatus?.status === 'online' ? 'success' : 'warning', sx: { mb: 3 }, icon: systemStatus?.status === 'online' ? (0, jsx_runtime_1.jsx)(icons_material_1.PlayArrow, {}) : (0, jsx_runtime_1.jsx)(icons_material_1.Stop, {}), children: ["Trading System Status: ", systemStatus?.status === 'online' ? 'ACTIVE' : 'INACTIVE', " - Auto-trading is ", autoTrading ? 'ENABLED' : 'DISABLED'] }), (0, jsx_runtime_1.jsxs)(material_1.Card, { children: [(0, jsx_runtime_1.jsxs)(material_1.Tabs, { value: tabValue, onChange: handleTabChange, sx: { borderBottom: 1, borderColor: 'divider' }, children: [(0, jsx_runtime_1.jsx)(material_1.Tab, { label: "Strategy Control" }), (0, jsx_runtime_1.jsx)(material_1.Tab, { label: "Manual Trading" }), (0, jsx_runtime_1.jsx)(material_1.Tab, { label: "Active Orders" }), (0, jsx_runtime_1.jsx)(material_1.Tab, { label: "Trade History" })] }), (0, jsx_runtime_1.jsx)(TabPanel, { value: tabValue, index: 0, children: (0, jsx_runtime_1.jsxs)(material_1.Grid, { container: true, spacing: 3, children: [(0, jsx_runtime_1.jsx)(material_1.Grid, { item: true, xs: 12, md: 6, children: (0, jsx_runtime_1.jsx)(material_1.Card, { variant: "outlined", children: (0, jsx_runtime_1.jsxs)(material_1.CardContent, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", gutterBottom: true, children: "Strategy Configuration" }), (0, jsx_runtime_1.jsxs)(material_1.FormControl, { fullWidth: true, sx: { mb: 2 }, children: [(0, jsx_runtime_1.jsx)(material_1.InputLabel, { children: "Select Strategy" }), (0, jsx_runtime_1.jsx)(material_1.Select, { value: selectedStrategy, onChange: (e) => setSelectedStrategy(e.target.value), label: "Select Strategy", children: mockStrategies.map((strategy) => ((0, jsx_runtime_1.jsx)(material_1.MenuItem, { value: strategy.id, children: strategy.name }, strategy.id))) })] }), (0, jsx_runtime_1.jsx)(material_1.TextField, { fullWidth: true, label: "Trade Amount (USDT)", value: tradeAmount, onChange: (e) => setTradeAmount(e.target.value), sx: { mb: 2 } }), (0, jsx_runtime_1.jsx)(material_1.TextField, { fullWidth: true, label: "Stop Loss (%)", value: stopLoss, onChange: (e) => setStopLoss(e.target.value), sx: { mb: 2 } }), (0, jsx_runtime_1.jsx)(material_1.TextField, { fullWidth: true, label: "Take Profit (%)", value: takeProfit, onChange: (e) => setTakeProfit(e.target.value), sx: { mb: 2 } }), (0, jsx_runtime_1.jsx)(material_1.FormControlLabel, { control: (0, jsx_runtime_1.jsx)(material_1.Switch, { checked: autoTrading, onChange: (e) => setAutoTrading(e.target.checked) }), label: "Enable Auto Trading", sx: { mb: 2 } }), (0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { display: 'flex', gap: 2 }, children: [(0, jsx_runtime_1.jsx)(material_1.Button, { variant: "contained", color: "success", startIcon: (0, jsx_runtime_1.jsx)(icons_material_1.PlayArrow, {}), onClick: handleStartStrategy, fullWidth: true, children: "Start Strategy" }), (0, jsx_runtime_1.jsx)(material_1.Button, { variant: "contained", color: "error", startIcon: (0, jsx_runtime_1.jsx)(icons_material_1.Stop, {}), onClick: handleStopStrategy, fullWidth: true, children: "Stop Strategy" })] })] }) }) }), (0, jsx_runtime_1.jsx)(material_1.Grid, { item: true, xs: 12, md: 6, children: (0, jsx_runtime_1.jsx)(material_1.Card, { variant: "outlined", children: (0, jsx_runtime_1.jsxs)(material_1.CardContent, { children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", gutterBottom: true, children: "Strategy Performance" }), mockStrategies.map((strategy) => ((0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { mb: 2, p: 2, border: 1, borderColor: 'grey.300', borderRadius: 1 }, children: [(0, jsx_runtime_1.jsxs)(material_1.Box, { sx: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "subtitle1", children: strategy.name }), (0, jsx_runtime_1.jsx)(material_1.Chip, { label: strategy.status, color: strategy.status === 'active' ? 'success' : 'default', size: "small" })] }), (0, jsx_runtime_1.jsxs)(material_1.Grid, { container: true, spacing: 2, children: [(0, jsx_runtime_1.jsxs)(material_1.Grid, { item: true, xs: 4, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "body2", color: "textSecondary", children: "P&L" }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", color: strategy.pnl >= 0 ? 'success.main' : 'error.main', children: formatCurrency(strategy.pnl) })] }), (0, jsx_runtime_1.jsxs)(material_1.Grid, { item: true, xs: 4, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "body2", color: "textSecondary", children: "Trades" }), (0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", children: strategy.trades })] }), (0, jsx_runtime_1.jsxs)(material_1.Grid, { item: true, xs: 4, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "body2", color: "textSecondary", children: "Win Rate" }), (0, jsx_runtime_1.jsxs)(material_1.Typography, { variant: "h6", children: [strategy.winRate, "%"] })] })] })] }, strategy.id)))] }) }) })] }) }), (0, jsx_runtime_1.jsxs)(TabPanel, { value: tabValue, index: 1, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", gutterBottom: true, children: "Manual Trading Controls" }), (0, jsx_runtime_1.jsx)(material_1.Alert, { severity: "info", sx: { mb: 2 }, children: "Manual trading functionality will be available once the trading system is connected." })] }), (0, jsx_runtime_1.jsxs)(TabPanel, { value: tabValue, index: 2, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", gutterBottom: true, children: "Active Orders" }), (0, jsx_runtime_1.jsx)(material_1.Alert, { severity: "info", children: "No active orders at the moment." })] }), (0, jsx_runtime_1.jsxs)(TabPanel, { value: tabValue, index: 3, children: [(0, jsx_runtime_1.jsx)(material_1.Typography, { variant: "h6", gutterBottom: true, children: "Recent Trades" }), (0, jsx_runtime_1.jsx)(material_1.TableContainer, { component: material_1.Paper, children: (0, jsx_runtime_1.jsxs)(material_1.Table, { children: [(0, jsx_runtime_1.jsx)(material_1.TableHead, { children: (0, jsx_runtime_1.jsxs)(material_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(material_1.TableCell, { children: "Time" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { children: "Symbol" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { children: "Side" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "Amount" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "Price" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: "P&L" }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { children: "Status" })] }) }), (0, jsx_runtime_1.jsx)(material_1.TableBody, { children: mockRecentTrades.map((trade, index) => ((0, jsx_runtime_1.jsxs)(material_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(material_1.TableCell, { children: trade.time }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { children: trade.symbol }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { children: (0, jsx_runtime_1.jsx)(material_1.Chip, { label: trade.side, color: trade.side === 'BUY' ? 'success' : 'error', size: "small" }) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: trade.amount }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: formatCurrency(trade.price) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { align: "right", children: (0, jsx_runtime_1.jsx)(material_1.Typography, { color: trade.pnl >= 0 ? 'success.main' : 'error.main', children: formatCurrency(trade.pnl) }) }), (0, jsx_runtime_1.jsx)(material_1.TableCell, { children: (0, jsx_runtime_1.jsx)(material_1.Chip, { label: trade.status, color: trade.status === 'closed' ? 'default' : 'primary', size: "small" }) })] }, index))) })] }) })] })] })] }));
};
exports.default = Trading;
