# ğŸš€ KOMPLETNY PRZEWODNIK KOMEND TRADING BOTA
# Data utworzenia: 28 sierpnia 2025
# Wersja: v2.0 - Zoptymalizowana dla Intel i3-1115G4

## ===============================================
## ğŸš€ KOMENDY URUCHAMIANIA BOTA
## ===============================================

### 1. PODSTAWOWE URUCHAMIANIE
# ğŸŸ¢ ZALECANE: Autonomiczny bot (podstawowy)
npm run start:autonomous

# ğŸŸ¢ ZALECANE: Autonomiczny bot (produkcja) 
npm run start:autonomous:prod

# ğŸŸ¡ Demo/Test bot
npm run start:autonomous:demo

# ğŸ”µ Main test bot
npm run start

# ğŸŸ¢ ZALECANE: Zoptymalizowany dla i3 CPU
npm run start:optimized

### 2. ENTERPRISE/PRODUCTION
# ğŸ”´ PRODUCTION: PeÅ‚na produkcja z real trading
npm run start:production:confirmed

# ğŸŸ  Production (bez real trading)
npm run start:production

# ğŸŸ¡ Demo production
npm run start:demo

# ğŸ”µ Enterprise system
npm run start:enterprise

# ğŸ”µ Enterprise production
npm run start:enterprise:prod

# ğŸ”§ Enterprise development (debug)
npm run start:enterprise:dev

### 3. PM2 (PROCES MANAGER) - ZALECANE
# ğŸŸ¢ START: Uruchom bot z PM2
npm run pm2:start

# ğŸ“Š MONITOR: Real-time monitoring
npm run pm2:monitor

# ğŸ“‹ LOGS: Zobacz logi w czasie rzeczywistym
npm run pm2:logs

# ğŸ”„ RESTART: Restart bota
npm run pm2:restart

# â¹ï¸ STOP: Zatrzymaj bota
npm run pm2:stop

# ğŸ“Š STATUS: SprawdÅº status
pm2 status

# ğŸ“Š Lista procesÃ³w
pm2 list

### 4. MONITORING I DIAGNOSTYKA
# ğŸ“Š Performance monitoring
npm run start:performance

# ğŸ”¥ CPU flame graph
npm run clinic:flame

# ğŸ©º Performance doctor
npm run clinic:doctor

# ğŸ”§ Dashboard
npm run start:dashboard

# ğŸš¨ Alert system
npm run start:alerts

# âš ï¸ Risk management
npm run start:risk

### 5. KOMPONENTY INFRASTRUKTURY
# ğŸ“Š Start monitoring stack (Docker)
npm run start:monitoring

# ğŸ—„ï¸ Start database
npm run start:database

# ğŸ”„ Start data pipeline
npm run start:pipeline

# ğŸ¯ Start optimization service
npm run start:optimization

## ===============================================
## â¹ï¸ KOMENDY ZATRZYMYWANIA BOTA
## ===============================================

### 1. PODSTAWOWE ZATRZYMYWANIE
# â¹ï¸ Zatrzymaj wszystkie procesy PM2
npm run pm2:stop

# â¹ï¸ Zatrzymaj konkretny proces
pm2 stop trading-bot

# â¹ï¸ Zatrzymaj performance monitor
pm2 stop performance-monitor

# ğŸ—‘ï¸ UsuÅ„ wszystkie procesy z PM2
pm2 delete all

# ğŸ—‘ï¸ UsuÅ„ konkretny proces
pm2 delete trading-bot

### 2. GRACEFUL SHUTDOWN
# ğŸ›‘ Graceful stop (jeÅ›li bot dziaÅ‚a w terminalu)
# Ctrl + C

# ğŸ›‘ Force kill procesÃ³w Node.js
pkill -f "node.*trading"
pkill -f "ts-node.*autonomous"

# ğŸ›‘ Kill wszystkie procesy Node.js (OSTROÅ»NIE!)
pkill -f node

### 3. DOCKER/INFRASTRUCTURE
# â¹ï¸ Zatrzymaj monitoring stack
docker-compose -f analytics/docker-compose.yml down

# â¹ï¸ Zatrzymaj wszystkie kontenery
docker stop $(docker ps -q)

# ğŸ—‘ï¸ UsuÅ„ wszystkie kontenery
docker rm $(docker ps -aq)

### 4. SYSTEM CLEANUP
# ğŸ§¹ WyczyÅ›Ä‡ cache Redis
redis-cli FLUSHALL

# ğŸ§¹ WyczyÅ›Ä‡ logi PM2
pm2 flush

# ğŸ§¹ Restart PM2 daemon
pm2 kill
pm2 resurrect

# ğŸ—‘ï¸ WyczyÅ›Ä‡ node_modules (jeÅ›li problemy)
rm -rf node_modules
npm install

## ===============================================
## ğŸ¯ ZALECANE SEKWENCJE
## ===============================================

### URUCHOMIENIE PRODUKCYJNE (KROK PO KROKU):
# 1. Start monitoring
npm run start:performance

# 2. Start bot z PM2
npm run pm2:start

# 3. Monitor status
npm run pm2:monitor

### ZATRZYMANIE PRODUKCYJNE (KROK PO KROKU):
# 1. Graceful stop
npm run pm2:stop

# 2. SprawdÅº status
pm2 status

# 3. Cleanup (opcjonalnie)
pm2 flush

### RESTART PO PROBLEMACH:
# 1. Force stop
pm2 kill

# 2. Clean restart  
npm run pm2:start

# 3. Monitor
npm run pm2:monitor

### EMERGENCY SHUTDOWN:
# 1. Force kill wszystko
pkill -f "node.*trading"

# 2. Stop Docker
docker stop $(docker ps -q)

# 3. Clean PM2
pm2 kill

# 4. Restart system (jeÅ›li potrzeba)
sudo reboot

## ===============================================
## ğŸ“Š SPRAWDZANIE STATUSU
## ===============================================

# ğŸ“Š Status PM2
pm2 status

# ğŸ“Š Monitoring w czasie rzeczywistym
pm2 monit

# ğŸ“‹ Logi
pm2 logs

# ğŸ’» ZuÅ¼ycie zasobÃ³w systemu
htop

# ğŸ” Procesy Node.js
ps aux | grep node

# ğŸ“Š UÅ¼ycie portÃ³w
netstat -tulpn | grep :3000
netstat -tulpn | grep :8080

# ğŸ§  UÅ¼ycie pamiÄ™ci
free -h

# ğŸ’¾ Miejsce na dysku
df -h

# ğŸ”¥ Top procesÃ³w CPU
top -o %CPU

## ===============================================
## ğŸš¨ TROUBLESHOOTING
## ===============================================

### JeÅ›li bot siÄ™ nie uruchamia:
# SprawdÅº bÅ‚Ä™dy
npm run pm2:logs

# Restart PM2
pm2 kill && npm run pm2:start

# SprawdÅº porty
netstat -tulpn | grep :3000

### JeÅ›li wysokie zuÅ¼ycie CPU:
# Start z limitem zasobÃ³w
npm run start:optimized

# Monitor performance
npm run start:performance

### JeÅ›li problemy z pamiÄ™ciÄ…:
# Restart z garbage collection
node --max-old-space-size=2048 autonomous_trading_bot.ts

### JeÅ›li PM2 nie dziaÅ‚a:
# Reinstall PM2
npm uninstall pm2 -g
npm install pm2 -g

# Restart PM2 daemon
pm2 kill
pm2 start ecosystem.config.js

### JeÅ›li TypeScript errors:
# Rebuild
npm run build

# Clean install
rm -rf node_modules package-lock.json
npm install

## ===============================================
## ğŸ”§ KONFIGURACJA I SETUP
## ===============================================

### Pierwsza instalacja:
# 1. Install dependencies
npm install

# 2. Install PM2 globally
npm install pm2 -g

# 3. Install Redis (Ubuntu/WSL)
sudo apt update
sudo apt install redis-server
sudo systemctl start redis

# 4. Start Redis
redis-server &

### Sprawdzenie Å›rodowiska:
# Node.js version
node --version

# NPM version
npm --version

# PM2 version
pm2 --version

# Redis status
redis-cli ping

# Available memory
free -h

# CPU info
lscpu

## ===============================================
## ğŸ“ˆ OPTYMALIZACJE DLA i3 HARDWARE
## ===============================================

### Zalecane ustawienia dla Intel i3-1115G4:
# 1. Limit Node.js memory
export NODE_OPTIONS="--max-old-space-size=2048"

# 2. Set process priority
sudo nice -n -10 npm run start:optimized

# 3. Enable swap (jeÅ›li brak)
sudo swapoff -a
sudo dd if=/dev/zero of=/swapfile bs=1M count=4096
sudo mkswap /swapfile
sudo swapon /swapfile

### Environment variables dla produkcji:
export NODE_ENV=production
export MAX_OLD_SPACE_SIZE=2048
export UV_THREADPOOL_SIZE=2

## ===============================================
## ğŸ” BEZPIECZEÅƒSTWO
## ===============================================

### Security audit:
npm audit
npm audit fix

### Process monitoring:
# SprawdÅº czy bot dziaÅ‚a jako wÅ‚aÅ›ciwy user
ps aux | grep node

# SprawdÅº otwarte porty
ss -tulpn

# SprawdÅº poÅ‚Ä…czenia sieciowe
netstat -an | grep ESTABLISHED

## ===============================================
## ğŸ“ LOGI I DEBUGGING
## ===============================================

### Lokalizacje logÃ³w:
# PM2 logs
~/.pm2/logs/

# Application logs
./logs/

# System logs
/var/log/

### Poziomy logowania:
export LOG_LEVEL=debug    # Verbose
export LOG_LEVEL=info     # Standard
export LOG_LEVEL=warn     # Tylko ostrzeÅ¼enia
export LOG_LEVEL=error    # Tylko bÅ‚Ä™dy

### Debug mode:
NODE_ENV=development LOG_LEVEL=debug npm run start:autonomous

## ===============================================
## ğŸ”„ BACKUP I RECOVERY
## ===============================================

### Backup konfiguracji:
cp ecosystem.config.js ecosystem.config.js.bak
cp package.json package.json.bak

### Backup danych:
# Trading data
cp trading_data.duckdb trading_data_backup.duckdb

# Logs backup
tar -czf logs_backup.tar.gz ./logs/

### Recovery po crash:
# 1. Kill all processes
pm2 kill

# 2. Clear cache
rm -rf ./cache/*

# 3. Restart fresh
npm run pm2:start

## ===============================================
## ğŸ“Š METRYKI I MONITORING
## ===============================================

### Kluczowe metryki do monitorowania:
# CPU usage (cel: <50%)
# RAM usage (cel: <4GB)
# Disk I/O
# Network connections
# Trading performance
# Error rate

### Alerty:
# CPU > 70% przez 5 minut
# RAM > 4GB przez 2 minuty
# Bot offline > 30 sekund
# Trading errors > 5 na godzinÄ™

## ===============================================
## ğŸ QUICK START (COPY-PASTE)
## ===============================================

### Szybkie uruchomienie (produkcja):
npm install
npm install pm2 -g
npm run pm2:start
npm run pm2:monitor

### Szybkie zatrzymanie:
npm run pm2:stop
pm2 status

### Szybki restart:
npm run pm2:restart
npm run pm2:logs

## ===============================================
## ğŸ“ WSPARCIE I KONTAKT
## ===============================================

# W przypadku problemÃ³w:
# 1. SprawdÅº logi: npm run pm2:logs
# 2. SprawdÅº status: pm2 status
# 3. Restart: npm run pm2:restart
# 4. Emergency: pm2 kill && npm run pm2:start

# Bot jest zoptymalizowany dla Intel i3-1115G4
# Cel: CPU <50%, RAM <4GB, stabilna praca 24/7
# Wersja: Autonomiczna 96.8% compliance

## ===============================================
## ğŸ“… HISTORIA ZMIAN
## ===============================================

# v2.0 (28.08.2025): 
# - Optymalizacja dla i3 hardware
# - Worker threads implementation
# - Redis caching system
# - Resource limiting
# - PM2 integration
# - Performance monitoring

# v1.0: Initial release
# - Basic autonomous trading
# - TensorFlow integration
# - Kafka streaming
# - Multi-strategy support
